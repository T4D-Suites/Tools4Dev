#### MODULE HEADER BLOC
# Generated From $Tools4Dev_PATH/Templates/function.env
# This documentation will be read and compile for man usage, MarkDown file and shell documentation
# v1.2
#
#   - Name:
#       Alpine
###
#   - Dependencies:
#       Enable community repositories in /etc/apk/repositories then
#       <<<
#       apk update && apk upgrade
#       apk add zsh git git-lfs python2
#       >>>
###
#   - Shared Folder:
#       <<<
#       mkdir -p /home/shared
#       cd /home/shared
#       >>>
###
#   - Clone Tools4Dev:
#       <<<
#       git clone {URL} --single-branch Tools4Dev
#       cd Tools4Dev
#       >>>
###
#   - Install Zshrc:
#       Please choose One :
# 
#       * If you already have Oh-My-ZSH and don't want to override your current .zshrc file
#       <<<
#       ./t4d install append
#       zsh
#       >>>
#       * If doesn't care
#       <<<
#       ./t4d install
#       zsh
#       >>>
###
#   - Clone Deps:
#       <<<
#       wks clone
#       >>>
###
#   - Documentation:
#       <<<
#       t4dDoc
#       >>>  
#       
###
#   - Prefix:
#       
###
#   - Error Code:
#       402
###
#   - See Also :
#       <[BitBucket] [Git] [Others Modules] etc.>
###
#   - Supported Platform:
#       * OSX ( 10.12.6 or higher )
#       * Fedora ( 25 or higher )
###
#   - Author(s):
#       - Quentin NIO
#
###
#   - Licenses:
#       iFeelSmart CONFIDENTIAL
#
#       Copyright Â© 2012-2018, iFeelSmart.
#       All Rights Reserved.
#
#       The  source  code contained  or described herein and all documents
#       related to the source code  ("Material")  are owned  by iFeelSmart
#       or  its  suppliers  or  licensors.  Title  to the Material remains
#       with iFeelSmart or its suppliers and licensors.
#
#       The  Material  contains  trade  secrets,   proprietary  code   and
#       confidential  information  of  iFeelSmart  or  its  suppliers  and
#       licensors.  The Material is protected by w orldwide  copyright and
#       trade  secret laws and treaty provisions.  No part of the Material
#       may be used, copied,  reproduced, modified,  published,  uploaded,
#       posted, transmitted, distributed, or disclosed in any way  without
#       iFeelSmart's prior express written permission.
#
#       No  license  under  any  patent,  copyright, trade secret or other
#       intellectual property right is granted to or conferred upon you by
#       disclosure or   delivery of  the Materials,  either  expressly, by
#       implication, inducement, estoppel or  otherwise. Any license under
#       such intellectual property rights must  be express and approved by
#       iFeelSmart in writing.
###
#### HEADER BLOC ####

_t4dPing(){
##### _t4dPing
#   DIFFERENT PING BEHAVIOR BETWEEN OSX AND LINUX
##### DOCUMENTATION BLOC #####
    ping -c 1 -W 1 $1 2>&1 | grep '1 packets received'
}

_t4dGetOsName(){
    echo "Linux"
}

_t4dGetSystemVersion(){
    echo $(cat /etc/alpine-release)
}

_t4dGetSystemHostName(){
    echo "$(hostname)"
}

_t4dSrcFileSystemDiskUsage(){
#OVERRIDING FIRST DEFINITION
#DOCUMENTATION AVAILABLE IN Source/Common/fileSystem.env
    # local _Default="$1"
    local _DefaultPath="/"
    if [[ -d "$1" ]]; then
        _DefaultPath="$1"
        shift
    fi
    local _TotalSpace="$(df -H | sed -e 's/  */ /g' | grep "${_DefaultPath}$" | cut -d ' ' -f2)"
    local _AvailableSpace="$(df -H | sed -e 's/  */ /g' | grep "${_DefaultPath}$" | cut -d ' ' -f4)"
    local _UsedSpace="$(df -H | sed -e 's/  */ /g' | grep "${_DefaultPath}$" | cut -d ' ' -f3)"
    local _Percentage="$(df -H | sed -e 's/  */ /g' | grep "${_DefaultPath}$" | cut -d ' ' -f5)"
    
    case $1 in 
        -available)
            echo "$_AvailableSpace"
        ;;
        -used)
            echo "$_UsedSpace"
        ;;
        -total)
            echo "$_TotalSpace"
        ;;
        -capacity)
            echo "$_Percentage"
        ;;
        *)
            echo "${_UsedSpace}/${_TotalSpace}"
        ;;
    esac

###############################
}

_t4dGetKeychainPassword(){
    if [[ "$T4D_SILENT_COMMAND" != "true" ]]; then
        local _pass=""
        _t4dDebugLog $plog "Enter $1 Password:"
        read -s _pass
        echo $_pass
    fi
}

_t4dSystemGetCores(){
#OVERRIDING FIRST DEFINITION
#DOCUMENTATION AVAILABLE IN Source/Common/system.env
    echo "$(cat /proc/cpuinfo| grep 'processor' | wc -l 2> /dev/null)"
}

_t4dPromptVarWithSpace(){
#OVERRIDING FIRST DEFINITION
#DOCUMENTATION AVAILABLE IN Source/Common/prompt.env
    echo "%$(printf "%-$1s" $(echo "$2" | rev))%" | rev
}

_t4dPromptVarWithSpaceAtEnd(){
#OVERRIDING FIRST DEFINITION
#DOCUMENTATION AVAILABLE IN Source/Common/prompt.env
    echo "%$(printf "%-${1}s" $2)%"
}

_t4dSrcAndroidAdbExists(){
#OVERRIDING FIRST DEFINITION
#DOCUMENTATION AVAILABLE IN Source/Android/android-utils.env
    local _t4dErrorCode=0
    local _adbPath=""

    _adbPath="$(which adb 2> /dev/null)"

    if [[ ! -e ${_adbPath} ]]; then _t4dErrorCode=100; fi

    return $_t4dErrorCode
}